[
  {
    "id": "1.1",
    "category": "functional",
    "phase": 1,
    "description": "Create src/graph/types.ts with all graph type definitions (BaseState, ExecutionContext, NodeResult, NodeDefinition, RetryConfig, GraphConfig, Signal, ExecutionError, DebugReport)",
    "steps": [
      "Create src/graph directory structure",
      "Define BaseState interface with executionId, lastUpdated, outputs",
      "Define ExecutionContext interface with state, config, errors, abortSignal",
      "Define NodeResult interface with stateUpdate, goto, signals",
      "Define NodeDefinition interface with id, type, execute, retry",
      "Define RetryConfig interface with maxAttempts, backoffMs, backoffMultiplier",
      "Define GraphConfig interface with checkpointer, maxConcurrency, timeout, onProgress",
      "Define Signal type union for context_window_warning, checkpoint, human_input_required, debug_report_generated",
      "Define ExecutionError interface with nodeId, error, timestamp, attempt",
      "Define DebugReport interface with errorSummary, stackTrace, relevantFiles, suggestedFixes",
      "Define NodeType as 'agent' | 'tool' | 'decision' | 'wait' | 'subgraph' | 'parallel'",
      "Export all types from index.ts"
    ],
    "passes": true
  },
  {
    "id": "1.2",
    "category": "functional",
    "phase": 1,
    "description": "Create src/graph/annotation.ts with state annotation system (Annotation interface, annotation function, AnnotationRoot type, Reducers)",
    "steps": [
      "Define Annotation<T> interface with default value and optional reducer",
      "Implement annotation<T> factory function",
      "Define AnnotationRoot type for combining annotations",
      "Implement Reducers object with replace, concat, merge, mergeById functions",
      "Create AtomicStateAnnotation example with all workflow state fields",
      "Export AtomicWorkflowState type derived from annotation",
      "Add unit tests for annotation reducers"
    ],
    "passes": true
  },
  {
    "id": "1.3",
    "category": "functional",
    "phase": 1,
    "description": "Create src/graph/checkpointer.ts with MemorySaver implementation",
    "steps": [
      "Define Checkpointer<TState> interface with save, load, list, delete methods",
      "Implement MemorySaver class with Map-based storage",
      "Implement save method using structuredClone",
      "Implement load method returning undefined for missing IDs",
      "Implement list method returning all execution IDs",
      "Implement delete method removing checkpoint",
      "Add unit tests for MemorySaver"
    ],
    "passes": true
  },
  {
    "id": "1.4",
    "category": "functional",
    "phase": 1,
    "description": "Create src/graph/nodes.ts with node factory functions (agentNode, toolNode, decisionNode, waitNode, parallelNode)",
    "steps": [
      "Define AgentNodeConfig interface with agentType, systemPrompt, tools, outputMapper, sessionConfig",
      "Implement agentNode factory function with session creation and streaming",
      "Define ToolNodeConfig interface with toolName, args, outputMapper, timeout",
      "Implement toolNode factory function with tool execution",
      "Define DecisionNodeConfig interface with condition and fallback",
      "Implement decisionNode factory function with condition evaluation",
      "Define WaitNodeConfig interface with prompt, autoApprove, inputMapper",
      "Implement waitNode factory function returning human_input_required signal",
      "Define ParallelNodeConfig interface with branches, mergeStrategy, merge",
      "Implement parallelNode factory function with Promise.all/race/any support",
      "Add default retry config to agent nodes",
      "Add unit tests for each node factory"
    ],
    "passes": true
  },
  {
    "id": "1.5",
    "category": "functional",
    "phase": 1,
    "description": "Add unit tests for Phase 1 types and annotations",
    "steps": [
      "Create tests/graph/types.test.ts with type validation tests",
      "Create tests/graph/annotation.test.ts with reducer tests",
      "Test replace reducer overwrites values",
      "Test concat reducer appends arrays",
      "Test merge reducer combines objects",
      "Test mergeById reducer merges by ID field",
      "Test annotation function creates proper annotation config",
      "Verify all tests pass with bun test"
    ],
    "passes": true
  },
  {
    "id": "1.6",
    "category": "functional",
    "phase": 1,
    "description": "Create src/graph/index.ts re-exporting all graph module types and functions",
    "steps": [
      "Create index.ts file in src/graph directory",
      "Re-export all types from types.ts",
      "Re-export all functions from annotation.ts",
      "Re-export Checkpointer and MemorySaver from checkpointer.ts",
      "Re-export all node factory functions from nodes.ts",
      "Verify exports are accessible from src/graph"
    ],
    "passes": true
  },
  {
    "id": "2.1",
    "category": "functional",
    "phase": 2,
    "description": "Create src/graph/builder.ts with GraphBuilder class and fluent API (.start, .then, .end)",
    "steps": [
      "Define Edge interface with from, to, condition",
      "Create GraphBuilder<TState> class with nodes Map and edges array",
      "Implement start(nodeId) method setting startNode and currentNode",
      "Implement then(node) method adding node and edge from current",
      "Implement end(...nodeIds) method marking terminal nodes",
      "Implement compile(config) method returning CompiledGraph",
      "Export graph<TState>() factory function",
      "Add unit tests for linear graph construction"
    ],
    "passes": true
  },
  {
    "id": "2.2",
    "category": "functional",
    "phase": 2,
    "description": "Implement .if(), .else(), .endif() conditional logic in GraphBuilder",
    "steps": [
      "Add conditionalStack array for tracking nested conditionals",
      "Implement if(condition) method creating decision node placeholder",
      "Implement else() method storing else branch starting node",
      "Implement endif() method popping conditional stack and wiring edges",
      "Handle nested conditionals properly",
      "Add unit tests for conditional branching",
      "Test nested if/else/endif structures"
    ],
    "passes": true
  },
  {
    "id": "2.3",
    "category": "functional",
    "phase": 2,
    "description": "Implement .loop() method with exit conditions in GraphBuilder",
    "steps": [
      "Define LoopConfig<TState> interface with until condition and maxIterations",
      "Implement loop(node, config) method creating loop subgraph node",
      "Implement loop execution with iteration counter",
      "Add maxIterations safety limit",
      "Handle human_input_required signal breaking loop",
      "Return accumulated state from loop iterations",
      "Add unit tests for loop with exit conditions"
    ],
    "passes": true
  },
  {
    "id": "2.4",
    "category": "functional",
    "phase": 2,
    "description": "Implement .parallel() method with merge strategies in GraphBuilder",
    "steps": [
      "Implement parallel(nodes, config) method creating parallel node",
      "Support 'all' merge strategy using Promise.all",
      "Support 'first' merge strategy using Promise.race",
      "Support 'any' merge strategy using Promise.any",
      "Support custom merge function for combining results",
      "Add unit tests for parallel execution with different strategies"
    ],
    "passes": true
  },
  {
    "id": "2.5",
    "category": "functional",
    "phase": 2,
    "description": "Implement .wait() for human-in-the-loop in GraphBuilder",
    "steps": [
      "Implement wait(prompt, config) method creating wait node",
      "Return human_input_required signal with prompt",
      "Support autoApprove configuration with timeout",
      "Add unit tests for wait node execution"
    ],
    "passes": true
  },
  {
    "id": "2.6",
    "category": "functional",
    "phase": 2,
    "description": "Implement .catch() for error handling in GraphBuilder",
    "steps": [
      "Implement catch(handler) method wrapping previous node's execute",
      "Handler receives error and context, returns NodeResult",
      "Support goto for redirecting to error recovery node",
      "Preserve original node behavior on success",
      "Add unit tests for error handling and recovery"
    ],
    "passes": true
  },
  {
    "id": "2.7",
    "category": "functional",
    "phase": 2,
    "description": "Add unit tests for all GraphBuilder methods",
    "steps": [
      "Create tests/graph/builder.test.ts",
      "Test linear graph builds correctly",
      "Test conditional branching selects correct path",
      "Test loop exits when condition met",
      "Test loop exits at maxIterations",
      "Test parallel execution merges results",
      "Test wait node returns signal",
      "Test catch handler catches errors",
      "Verify all tests pass with bun test"
    ],
    "passes": true
  },
  {
    "id": "3.1",
    "category": "functional",
    "phase": 3,
    "description": "Create src/graph/compiled.ts with CompiledGraph class",
    "steps": [
      "Create CompiledGraph<TState> class with nodes, edges, startNode, endNodes, config",
      "Implement constructor validating required fields",
      "Implement execute(initialState) method running graph to completion",
      "Implement stream(initialState) AsyncGenerator for incremental execution",
      "Export CompiledGraph class"
    ],
    "passes": true
  },
  {
    "id": "3.2",
    "category": "functional",
    "phase": 3,
    "description": "Implement BFS traversal with visited tracking in CompiledGraph",
    "steps": [
      "Create queue starting with startNode",
      "Track visited nodes in Set",
      "Skip already visited nodes (except loop nodes)",
      "Get outgoing edges for current node",
      "Apply edge conditions to filter next nodes",
      "Add next nodes to queue",
      "Stop at end nodes"
    ],
    "passes": true
  },
  {
    "id": "3.3",
    "category": "functional",
    "phase": 3,
    "description": "Implement state merging with annotation reducers in CompiledGraph",
    "steps": [
      "Implement initializeState(partial) creating full state with defaults",
      "Implement mergeState(current, update) using annotation reducers",
      "Handle Date serialization for lastUpdated",
      "Apply reducers based on field type (replace, concat, merge)",
      "Add unit tests for state merging"
    ],
    "passes": true
  },
  {
    "id": "3.4",
    "category": "functional",
    "phase": 3,
    "description": "Implement streaming via AsyncGenerator in CompiledGraph",
    "steps": [
      "Yield state after each node execution",
      "Update lastUpdated timestamp on state changes",
      "Handle goto for dynamic routing",
      "Handle signals in stream output",
      "Stop on human_input_required signal",
      "Continue execution after resume"
    ],
    "passes": true
  },
  {
    "id": "3.5",
    "category": "functional",
    "phase": 3,
    "description": "Implement retry logic with exponential backoff in CompiledGraph",
    "steps": [
      "Implement executeWithRetry(node, ctx) method",
      "Use node.retry config for maxAttempts and backoff",
      "Calculate delay with backoffMultiplier",
      "Support retryOn predicate for conditional retry",
      "Track attempts in ExecutionError",
      "Throw last error after max attempts exhausted",
      "Add unit tests for retry behavior"
    ],
    "passes": true
  },
  {
    "id": "3.6",
    "category": "functional",
    "phase": 3,
    "description": "Implement signal handling in CompiledGraph (context warning, human input)",
    "steps": [
      "Process signals array from node results",
      "Handle context_window_warning signal",
      "Handle human_input_required signal by pausing execution",
      "Handle checkpoint signal by triggering save",
      "Handle debug_report_generated signal",
      "Return signals to caller for external handling"
    ],
    "passes": true
  },
  {
    "id": "3.7",
    "category": "functional",
    "phase": 3,
    "description": "Integrate checkpointing into CompiledGraph execution",
    "steps": [
      "Call checkpointer.save(state) after each node completion",
      "Implement resume from checkpoint by loading state",
      "Implement getCheckpointedState() method",
      "Handle checkpoint signal label",
      "Add unit tests for checkpointing during execution"
    ],
    "passes": true
  },
  {
    "id": "3.8",
    "category": "functional",
    "phase": 3,
    "description": "Add integration tests for CompiledGraph execution",
    "steps": [
      "Create tests/graph/compiled.test.ts",
      "Test simple linear graph execution",
      "Test conditional branching execution",
      "Test loop execution with exit condition",
      "Test parallel node execution",
      "Test retry on transient failure",
      "Test checkpoint save and load",
      "Test streaming yields intermediate states",
      "Verify all tests pass with bun test"
    ],
    "passes": true
  },
  {
    "id": "4.1",
    "category": "functional",
    "phase": 4,
    "description": "Create src/sdk/types.ts with thin adapter interface (CodingAgentClient, CodingAgentSession, CodingAgentSessionConfig)",
    "steps": [
      "Define CodingAgentSession interface with id, send, stream, compact, close, native",
      "Define CodingAgentClient<TSession> interface with createSession, resumeSession, events, start, stop",
      "Define CodingAgentSessionConfig with model, sessionId, systemPrompt, permissionMode, maxTurns, nativeOptions",
      "Document that native accessor provides access to underlying SDK session",
      "Document that stream() returns native SDK message types",
      "Export all types from types.ts"
    ],
    "passes": true
  },
  {
    "id": "4.2",
    "category": "functional",
    "phase": 4,
    "description": "Create src/sdk/claude-client.ts as thin wrapper over Claude V2 SDK",
    "steps": [
      "Import unstable_v2_createSession, unstable_v2_resumeSession from @anthropic-ai/claude-agent-sdk",
      "Implement ClaudeAgentClient class implementing CodingAgentClient<ClaudeSession>",
      "Implement createSession using unstable_v2_createSession directly",
      "Implement resumeSession using unstable_v2_resumeSession",
      "Implement events() throwing error directing to session.stream()",
      "Implement start() as no-op (V2 handles automatically)",
      "Implement stop() closing all sessions",
      "Implement ClaudeSession class with send, stream, compact, close, native",
      "Return native SDKMessage from stream() without transformation",
      "Document compact() uses V2 auto-compaction",
      "Add unit tests with mocked SDK"
    ],
    "passes": true
  },
  {
    "id": "4.3",
    "category": "functional",
    "phase": 4,
    "description": "Create src/sdk/opencode-client.ts as thin wrapper using native summarize() and events",
    "steps": [
      "Import createOpencodeClient from @opencode-ai/sdk/v2/client",
      "Implement OpenCodeClient class implementing CodingAgentClient<OpenCodeSession>",
      "Implement createSession using client.session.create",
      "Implement resumeSession verifying session exists then returning wrapper",
      "Implement events() yielding from client.event.subscribe()",
      "Implement start() as no-op",
      "Implement stop() cleaning up",
      "Implement OpenCodeSession class with send, stream, compact, close, native",
      "Use client.session.prompt for send",
      "Filter event stream for session ID in stream()",
      "Use client.session.summarize for compact()",
      "Use client.session.delete for close()",
      "Add unit tests with mocked SDK"
    ],
    "passes": true
  },
  {
    "id": "4.4",
    "category": "functional",
    "phase": 4,
    "description": "Create src/sdk/copilot-client.ts as thin wrapper using native 31 event types",
    "steps": [
      "Import CopilotClient from @github/copilot-sdk",
      "Implement CopilotClient class implementing CodingAgentClient<CopilotSession>",
      "Support stdio, port, and cliUrl connection modes",
      "Implement createSession using client.createSession",
      "Implement resumeSession using client.resumeSession",
      "Implement events() converting callback to AsyncGenerator",
      "Implement start() calling client.start()",
      "Implement stop() calling client.stop()",
      "Implement CopilotSession with send, stream, compact, close, native",
      "Use session.send for message sending",
      "Convert session.on callback to stream generator",
      "Use /compact command for compact()",
      "Use session.destroy for close()",
      "Add unit tests with mocked SDK"
    ],
    "passes": true
  },
  {
    "id": "4.5",
    "category": "functional",
    "phase": 4,
    "description": "Create src/sdk/event-bridge.ts for event passthrough (not mapping)",
    "steps": [
      "Define NativeEvent interface with source and event fields",
      "Implement EventBridge class with listeners Set",
      "Implement subscribe(handler) returning unsubscribe function",
      "Implement connect(client, source) forwarding events with source tag",
      "Forward events as-is without transformation",
      "Document that graph nodes handle SDK-specific event types",
      "Add unit tests for event forwarding"
    ],
    "passes": true
  },
  {
    "id": "4.6",
    "category": "functional",
    "phase": 4,
    "description": "Create src/sdk/index.ts re-exporting SDK types and clients",
    "steps": [
      "Re-export all types from types.ts",
      "Re-export ClaudeAgentClient and ClaudeSession",
      "Re-export OpenCodeClient and OpenCodeSession",
      "Re-export CopilotClient and CopilotSession",
      "Re-export EventBridge and NativeEvent",
      "Verify exports are accessible from src/sdk"
    ],
    "passes": true
  },
  {
    "id": "4.7",
    "category": "functional",
    "phase": 4,
    "description": "Add unit tests for SDK clients with mocked SDKs",
    "steps": [
      "Create tests/sdk/claude-client.test.ts",
      "Create tests/sdk/opencode-client.test.ts",
      "Create tests/sdk/copilot-client.test.ts",
      "Create tests/sdk/event-bridge.test.ts",
      "Mock SDK methods for testing",
      "Test session creation and configuration passing",
      "Test message sending",
      "Test streaming response handling",
      "Test compact() calls native SDK method",
      "Test session close cleanup",
      "Test event bridge forwarding",
      "Verify all tests pass with bun test"
    ],
    "passes": true
  },
  {
    "id": "5.1",
    "category": "ui",
    "phase": 5,
    "description": "Install @opentui/core and @opentui/react dependencies",
    "steps": [
      "Run bun add @opentui/core @opentui/react",
      "Verify packages are installed in node_modules",
      "Update package.json with new dependencies",
      "Test basic import works"
    ],
    "passes": true
  },
  {
    "id": "5.2",
    "category": "ui",
    "phase": 5,
    "description": "Create src/ui/chat.tsx with main ChatApp component",
    "steps": [
      "Import render, useKeyboard, useTerminalDimensions from @opentui/react",
      "Define ChatMessage interface with id, role, content, timestamp, streaming",
      "Define ChatAppProps with onSendMessage, onStreamMessage, onExit",
      "Implement ChatApp component with useState for messages and isStreaming",
      "Use useTerminalDimensions for responsive layout",
      "Use useKeyboard for ESC and Ctrl+C handling",
      "Implement handleSubmit for message sending and streaming",
      "Render box layout with header, scrollbox, and input",
      "Implement MessageBubble component for message display"
    ],
    "passes": true
  },
  {
    "id": "5.3",
    "category": "ui",
    "phase": 5,
    "description": "Implement MessageBubble with markdown rendering in ChatApp",
    "steps": [
      "Create MessageBubble function component",
      "Style user vs assistant messages differently",
      "Display role and streaming indicator",
      "Render content using markdown component",
      "Pass streaming prop for incremental rendering",
      "Apply theme colors for backgrounds"
    ],
    "passes": true
  },
  {
    "id": "5.4",
    "category": "ui",
    "phase": 5,
    "description": "Create src/ui/code-block.tsx with syntax highlighting",
    "steps": [
      "Import CodeRenderable from @opentui/core",
      "Define CodeBlockProps with content, language, streaming",
      "Implement CodeBlock component using code renderable",
      "Set filetype for syntax highlighting",
      "Use monokai syntax style",
      "Support streaming mode for incremental highlighting",
      "Implement extractCodeBlocks utility for parsing markdown",
      "Add border and padding styling"
    ],
    "passes": true
  },
  {
    "id": "5.5",
    "category": "ui",
    "phase": 5,
    "description": "Create src/ui/theme.ts with dark/light themes",
    "steps": [
      "Define Theme interface with name and colors object",
      "Define color fields: background, foreground, accent, border, userMessage, assistantMessage, error, success, warning",
      "Implement darkTheme with dark colors",
      "Implement lightTheme with light colors",
      "Create ThemeContext with React.createContext",
      "Implement useTheme hook returning current theme",
      "Implement ThemeProvider component"
    ],
    "passes": true
  },
  {
    "id": "5.6",
    "category": "ui",
    "phase": 5,
    "description": "Create src/ui/index.ts with CLI integration (startChatUI function)",
    "steps": [
      "Import render from @opentui/react",
      "Import createCliRenderer from @opentui/core",
      "Import ChatApp and theme components",
      "Implement startChatUI(client, sessionConfig) async function",
      "Create CLI renderer instance",
      "Manage session lifecycle",
      "Wire up message handlers to client",
      "Handle exit by unmounting before destroying renderer",
      "Register SIGINT and SIGTERM handlers",
      "Export startChatUI function"
    ],
    "passes": true
  },
  {
    "id": "5.7",
    "category": "ui",
    "phase": 5,
    "description": "Handle renderer lifecycle (unmount before destroy to avoid Yoga crash)",
    "steps": [
      "Store root reference from render()",
      "In handleExit, call root.unmount() first",
      "Then call renderer.destroy()",
      "Then process.exit(0)",
      "Document this order is required to avoid Yoga layout crash"
    ],
    "passes": true
  },
  {
    "id": "5.8",
    "category": "ui",
    "phase": 5,
    "description": "Add unit tests for UI components",
    "steps": [
      "Create tests/ui/chat.test.tsx",
      "Create tests/ui/theme.test.ts",
      "Test ChatApp renders without errors",
      "Test message submission adds user message",
      "Test streaming updates assistant message",
      "Test ESC key triggers onExit",
      "Test theme provider provides correct theme",
      "Test dark and light theme colors",
      "Verify all tests pass with bun test"
    ],
    "passes": true
  },
  {
    "id": "6.1",
    "category": "functional",
    "phase": 6,
    "description": "Create src/telemetry/types.ts with TelemetryEvent types",
    "steps": [
      "Define TelemetryEvent interface with eventId, timestamp, eventType, sessionId, executionId, properties",
      "Define TelemetryEventType union with SDK events (session, message, tool, error)",
      "Define TelemetryEventType union with graph events (execution, node, checkpoint)",
      "Define TelemetryEventType union with workflow events (ralph, feature)",
      "Define TelemetryEventType union with UI events (chat)",
      "Define TelemetryCollector interface with track, flush, isEnabled, shutdown"
    ],
    "passes": true
  },
  {
    "id": "6.2",
    "category": "functional",
    "phase": 6,
    "description": "Create src/telemetry/collector.ts with UnifiedTelemetryCollector",
    "steps": [
      "Define collector configuration interface",
      "Implement UnifiedTelemetryCollector class",
      "Generate stable anonymous ID from machine characteristics",
      "Implement isEnabled() respecting DO_NOT_TRACK and ATOMIC_TELEMETRY env vars",
      "Implement track(event) adding metadata and queueing event",
      "Implement auto-flush at batch size threshold",
      "Implement flush interval timer",
      "Implement flush() calling local and remote sinks",
      "Implement shutdown() flushing and clearing interval"
    ],
    "passes": true
  },
  {
    "id": "6.3",
    "category": "functional",
    "phase": 6,
    "description": "Implement local JSONL logging in TelemetryCollector",
    "steps": [
      "Implement writeToLocalLog(events) method",
      "Create log directory if not exists",
      "Generate daily log file name with ISO date",
      "Convert events to JSONL format (one JSON per line)",
      "Append to log file",
      "Handle write errors silently"
    ],
    "passes": true
  },
  {
    "id": "6.4",
    "category": "functional",
    "phase": 6,
    "description": "Implement Azure Application Insights upload in TelemetryCollector",
    "steps": [
      "Implement sendToAppInsights(events) method",
      "Map events to Application Insights EventData format",
      "Set iKey from configuration",
      "POST to dc.services.visualstudio.com/v2/track",
      "Handle upload errors silently",
      "Only send if appInsightsKey is configured"
    ],
    "passes": true
  },
  {
    "id": "6.5",
    "category": "functional",
    "phase": 6,
    "description": "Create src/telemetry/sdk-integration.ts with connectTelemetry function",
    "steps": [
      "Import TelemetryCollector and EventBridge types",
      "Implement connectTelemetry(bridge, collector) function",
      "Subscribe to EventBridge for all SDK events",
      "Infer telemetry event type from native event type",
      "Extract session ID from various event formats",
      "Sanitize event data for privacy",
      "Track events through collector",
      "Return unsubscribe function"
    ],
    "passes": true
  },
  {
    "id": "6.6",
    "category": "functional",
    "phase": 6,
    "description": "Create src/telemetry/graph-integration.ts with graph telemetry hooks",
    "steps": [
      "Implement withGraphTelemetry(config, collector) function",
      "Wrap onProgress to track node completion events",
      "Implement trackGraphExecution(collector, executionId) factory",
      "Return started(), completed(state), failed(error, nodeId), checkpointSaved(label) methods",
      "Track execution lifecycle events"
    ],
    "passes": true
  },
  {
    "id": "6.7",
    "category": "functional",
    "phase": 6,
    "description": "Create src/telemetry/config.ts with configuration loader",
    "steps": [
      "Define TelemetryConfig interface",
      "Implement loadTelemetryConfig() function",
      "Check DO_NOT_TRACK and ATOMIC_TELEMETRY env vars",
      "Determine data directory based on platform",
      "Set localLogPath in data directory",
      "Load appInsightsKey from ATOMIC_APP_INSIGHTS_KEY env var",
      "Return configuration object"
    ],
    "passes": true
  },
  {
    "id": "6.8",
    "category": "functional",
    "phase": 6,
    "description": "Create src/telemetry/index.ts re-exporting telemetry module",
    "steps": [
      "Re-export types from types.ts",
      "Re-export UnifiedTelemetryCollector from collector.ts",
      "Re-export connectTelemetry from sdk-integration.ts",
      "Re-export withGraphTelemetry and trackGraphExecution from graph-integration.ts",
      "Re-export loadTelemetryConfig from config.ts"
    ],
    "passes": true
  },
  {
    "id": "6.9",
    "category": "functional",
    "phase": 6,
    "description": "Add unit tests for telemetry collector",
    "steps": [
      "Create tests/telemetry/collector.test.ts",
      "Test isEnabled respects DO_NOT_TRACK",
      "Test isEnabled respects ATOMIC_TELEMETRY=0",
      "Test track adds events to queue",
      "Test auto-flush at batch size",
      "Test flush writes to local log",
      "Test anonymous ID is stable",
      "Test shutdown flushes remaining events",
      "Verify all tests pass with bun test"
    ],
    "passes": true
  },
  {
    "id": "7.1",
    "category": "functional",
    "phase": 7,
    "description": "Create src/workflows/atomic.ts with Atomic workflow definition",
    "steps": [
      "Import graph builder and node factories",
      "Import AtomicWorkflowState type",
      "Implement createAtomicWorkflow(client) function",
      "Define research agent node",
      "Define createSpec agent node",
      "Define reviewSpec decision node",
      "Define waitForApproval wait node",
      "Define createFeatureList agent node",
      "Define selectFeature decision node",
      "Define implementFeature agent node with loop",
      "Define createPR tool node",
      "Build graph with fluent API",
      "Compile with ResearchDirSaver checkpointer"
    ],
    "passes": true
  },
  {
    "id": "7.2",
    "category": "functional",
    "phase": 7,
    "description": "Implement FileSaver and ResearchDirSaver checkpointers",
    "steps": [
      "Implement FileSaver class with directory-based storage",
      "Implement save writing JSON file",
      "Implement load reading JSON file",
      "Implement list using readdir",
      "Implement delete using unlink",
      "Implement ResearchDirSaver extending FileSaver pattern",
      "Use research/checkpoints directory",
      "Save as markdown with YAML frontmatter and JSON code block",
      "Parse JSON from code block on load",
      "Add unit tests for both checkpointers"
    ],
    "passes": true
  },
  {
    "id": "7.3",
    "category": "functional",
    "phase": 7,
    "description": "Update atomic ralph setup command to use graph engine",
    "steps": [
      "Locate existing ralph setup command",
      "Import createAtomicWorkflow function",
      "Create SDK client based on -a flag",
      "Create workflow graph",
      "Execute graph with initial state",
      "Handle streaming execution with progress display",
      "Handle human_input_required signals",
      "Display completion status"
    ],
    "passes": true
  },
  {
    "id": "7.4",
    "category": "functional",
    "phase": 7,
    "description": "Add ATOMIC_USE_GRAPH_ENGINE feature flag",
    "steps": [
      "Check ATOMIC_USE_GRAPH_ENGINE environment variable",
      "Default to true for new installations",
      "Support =0 to disable graph engine",
      "Document feature flag in README",
      "Add to configuration documentation"
    ],
    "passes": true
  },
  {
    "id": "7.5",
    "category": "functional",
    "phase": 7,
    "description": "Integrate OpenTUI chat interface with workflows",
    "steps": [
      "Import startChatUI from src/ui",
      "Create client based on agent selection",
      "Start chat UI with client and session config",
      "Wire up workflow graph execution to chat",
      "Display graph progress in chat",
      "Handle workflow completion in UI"
    ],
    "passes": true
  },
  {
    "id": "7.6",
    "category": "functional",
    "phase": 7,
    "description": "Update CLI to display graph execution progress",
    "steps": [
      "Subscribe to graph execution events",
      "Display node start/complete messages",
      "Show progress indicator during execution",
      "Display error messages with context",
      "Show checkpoint saves",
      "Display iteration count for loops"
    ],
    "passes": true
  },
  {
    "id": "7.7",
    "category": "functional",
    "phase": 7,
    "description": "Wire up telemetry for workflow events",
    "steps": [
      "Create telemetry collector in workflow command",
      "Track workflow.ralph.started on start",
      "Track workflow.ralph.iteration on each loop",
      "Track workflow.feature.started/completed for features",
      "Track workflow.ralph.completed on finish",
      "Ensure flush on exit"
    ],
    "passes": true
  },
  {
    "id": "7.8",
    "category": "functional",
    "phase": 7,
    "description": "Add end-to-end tests for Ralph workflow",
    "steps": [
      "Create tests/workflows/atomic.test.ts",
      "Mock SDK client for testing",
      "Test workflow executes research node",
      "Test workflow creates spec",
      "Test workflow waits for approval",
      "Test workflow loops through features",
      "Test workflow creates PR",
      "Test checkpoints are saved",
      "Test workflow can resume from checkpoint",
      "Verify all tests pass with bun test"
    ],
    "passes": true
  },
  {
    "id": "8.1",
    "category": "documentation",
    "phase": 8,
    "description": "Update README with graph engine documentation",
    "steps": [
      "Add Graph Execution Engine section to README",
      "Document GraphBuilder fluent API",
      "Document node types and their purposes",
      "Document checkpointing and resumption",
      "Add examples of workflow definition",
      "Document ATOMIC_USE_GRAPH_ENGINE flag"
    ],
    "passes": true
  },
  {
    "id": "8.2",
    "category": "documentation",
    "phase": 8,
    "description": "Document OpenTUI chat interface usage",
    "steps": [
      "Add UI section to documentation",
      "Document chat interface features",
      "Document keyboard shortcuts",
      "Document theme configuration",
      "Add screenshots if applicable"
    ],
    "passes": true
  },
  {
    "id": "8.3",
    "category": "documentation",
    "phase": 8,
    "description": "Document telemetry collection and opt-out",
    "steps": [
      "Add Telemetry section to documentation",
      "Document what data is collected",
      "Document DO_NOT_TRACK support",
      "Document ATOMIC_TELEMETRY=0 opt-out",
      "Document local log location",
      "Document Azure App Insights integration"
    ],
    "passes": true
  },
  {
    "id": "8.4",
    "category": "documentation",
    "phase": 8,
    "description": "Create migration guide for existing Ralph users",
    "steps": [
      "Document changes from hook-based to graph-based execution",
      "Document new command syntax if changed",
      "Document checkpoint file locations",
      "Document how to resume interrupted workflows",
      "Document breaking changes if any"
    ],
    "passes": true
  },
  {
    "id": "8.5",
    "category": "functional",
    "phase": 8,
    "description": "Enable graph engine by default",
    "steps": [
      "Set ATOMIC_USE_GRAPH_ENGINE default to true",
      "Remove feature flag checks from main code paths",
      "Keep flag for rollback purposes",
      "Update documentation to reflect default"
    ],
    "passes": true
  },
  {
    "id": "8.6",
    "category": "functional",
    "phase": 8,
    "description": "Final integration testing and verification",
    "steps": [
      "Run full test suite with bun test",
      "Run bun lint for code quality",
      "Run bun type-check for type safety",
      "Test atomic ralph setup -a claude manually",
      "Test atomic ralph setup -a copilot manually",
      "Test atomic ralph setup -a opencode manually",
      "Verify checkpoints are created",
      "Verify telemetry is logged locally",
      "Verify all documented features work"
    ],
    "passes": true
  }
]
