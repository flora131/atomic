# Progress Log

## 2026-02-01: Tool Call Display Fix

### Summary
Fixed critical bug where tool calls were not being displayed in the chat TUI during streaming responses.

### Changes Made

1. **src/ui/chat.tsx**
   - Added `OnToolStart` and `OnToolComplete` callback type exports
   - Added `registerToolStartHandler` and `registerToolCompleteHandler` props to ChatAppProps
   - Added useEffect hooks to register tool handlers with parent component
   - Removed Ctrl+O verbose mode toggle (per user request)

2. **src/ui/index.ts**
   - Added `subscribeToToolCompleteEvents()` function to handle tool.complete events from SDK
   - Modified `handleStreamMessage()` to handle tool_use and tool_result message types
   - Added tool event handler registration when rendering ChatApp
   - Tool start comes from stream messages (tool_use type)
   - Tool complete comes from SDK events (tool.complete via hooks)

3. **research/feature-list.json**
   - Removed "Footer status line" feature (user requested removal)
   - Removed "Verbose mode toggle" feature (user requested removal)
   - Added and completed "Fix tool call display in chat UI" feature
   - Updated passes status for implemented features

### Verification
- All 2375 tests pass
- E2E tested tool call display in tmux pane
- Tool calls now show with status: running -> done
- Tool input and output are displayed correctly

### Architecture Notes
The tool event flow differs between SDK clients:
- **Claude client**: Tool start via stream message (type: tool_use), tool complete via hook events (PostToolUse)
- **OpenCode client**: Both via SSE events and stream messages
- **Copilot client**: Via session event subscription

The UI now handles both patterns by:
1. Processing tool_use messages in the stream
2. Subscribing to tool.complete events from the client
