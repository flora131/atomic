# CLI Banner Ordering Fix - Progress Log

## 2026-01-19

### Completed Features (6/9)

Implemented the core fix for the CLI banner ordering issue. The changes ensure proper visual hierarchy when running `atomic -a [agent]` with uninitialized config:

1. **[DONE] Add configNotFoundMessage option to InitOptions interface**
   - File: `src/commands/init.ts:24-28`
   - Added `configNotFoundMessage?: string` property

2. **[DONE] Destructure configNotFoundMessage in initCommand function**
   - File: `src/commands/init.ts:53`
   - Updated: `const { showBanner = true, configNotFoundMessage } = options;`

3. **[DONE] Display configNotFoundMessage after intro text in initCommand**
   - File: `src/commands/init.ts:67-70`
   - Added conditional display after intro text, before agent selection

4. **[DONE] Remove log.info call from runAgentCommand before initCommand**
   - File: `src/commands/run-agent.ts`
   - Removed `log.info()` call and unused import

5. **[DONE] Change showBanner to true in runAgentCommand auto-init flow**
   - File: `src/commands/run-agent.ts:48`
   - Changed from `showBanner: false` to `showBanner: true`

6. **[DONE] Pass configNotFoundMessage parameter to initCommand in runAgentCommand**
   - File: `src/commands/run-agent.ts:49`
   - Added: `configNotFoundMessage: \`${agent.folder} not found. Running setup...\``

### Test Results

- All 91 tests pass
- TypeScript compiles without errors
- Build succeeds

### Remaining Features (3/9) - Manual Verification Tasks

7. Verify display ordering for `atomic -a [agent]` with uninitialized config
8. Verify display ordering for `atomic init -a [agent]`
9. Verify `atomic -a [agent]` with existing config skips banner and intro

### Expected Display Order After Fix

For `atomic -a claude-code` (uninitialized):
```
[ASCII BANNER]                                    <- displayBanner() if terminal >= 79x27

┌  Atomic: Automated Procedures and Memory...     <- intro()
│
│  Enable multi-hour autonomous coding...         <- log.message()
│
●  .claude not found. Running setup...            <- log.info(configNotFoundMessage) [NEW POSITION]
│
●  Configuring Claude Code...                     <- log.info("Configuring...")
```

### Files Modified

- `src/commands/init.ts` - Added configNotFoundMessage support
- `src/commands/run-agent.ts` - Updated auto-init flow to pass message
- `tests/init.test.ts` - Added test for configNotFoundMessage option
- `tests/run-agent.test.ts` - Updated tests to reflect new behavior
